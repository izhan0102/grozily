<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Windows Notification Troubleshooting</title>
    <style>
        body {
            font-family: Arial, sans-serif;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            line-height: 1.6;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #3498db;
            padding-bottom: 10px;
        }
        h2 {
            color: #2980b9;
            margin-top: 30px;
        }
        .step {
            background: #f9f9f9;
            border-left: 4px solid #3498db;
            padding: 15px;
            margin: 20px 0;
        }
        .step h3 {
            margin-top: 0;
            color: #3498db;
        }
        img {
            max-width: 100%;
            border: 1px solid #ddd;
            margin: 15px 0;
        }
        .important {
            background-color: #ffe6e6;
            border-left: 4px solid #ff4d4d;
            padding: 10px;
            margin: 10px 0;
        }
        code {
            background: #f0f0f0;
            padding: 2px 5px;
            border-radius: 3px;
        }
        ul li, ol li {
            margin-bottom: 8px;
        }
        button {
            background: #3498db;
            color: white;
            border: none;
            padding: 10px 20px;
            font-size: 16px;
            cursor: pointer;
            margin: 10px 0;
            border-radius: 4px;
        }
        button:hover {
            background: #2980b9;
        }
        .test-section {
            margin: 30px 0;
            padding: 20px;
            background: #e8f4fc;
            border-radius: 5px;
        }
    </style>
</head>
<body>
    <h1>Windows Notification Troubleshooting Guide</h1>
    
    <p>If you're having trouble with web notifications on Windows, follow this comprehensive guide to diagnose and fix the issues.</p>
    
    <div class="test-section">
        <h2>Quick Notification Test</h2>
        <p>Click the button below to test if basic notifications work on your system:</p>
        <button id="testNotification">Test Notification</button>
        <div id="testResult"></div>
    </div>
    
    <h2>Common Windows Notification Issues</h2>
    
    <div class="step">
        <h3>Step 1: Check Focus Assist (Windows 10/11)</h3>
        <p>Windows Focus Assist can block notifications from appearing:</p>
        <ol>
            <li>Open <strong>Settings</strong> (Win+I)</li>
            <li>Go to <strong>System</strong> → <strong>Focus assist</strong></li>
            <li>Make sure it's set to <strong>"Off"</strong> or <strong>"Priority only"</strong> with your browser added as priority</li>
        </ol>
    </div>
    
    <div class="step">
        <h3>Step 2: Check Windows Notification Settings</h3>
        <ol>
            <li>Open <strong>Settings</strong> (Win+I)</li>
            <li>Go to <strong>System</strong> → <strong>Notifications & actions</strong> (Windows 10) or just <strong>Notifications</strong> (Windows 11)</li>
            <li>Make sure <strong>"Get notifications from apps and other senders"</strong> is turned ON</li>
            <li>Scroll down to find your browser (Chrome, Edge, Firefox, etc.) and make sure it's enabled</li>
            <li>Click on your browser in the list and ensure all notification settings are enabled</li>
        </ol>
    </div>
    
    <div class="step">
        <h3>Step 3: Check Browser Notification Settings</h3>
        
        <h4>Google Chrome:</h4>
        <ol>
            <li>Open Chrome and type <code>chrome://settings/content/notifications</code> in the address bar</li>
            <li>Make sure notifications are not blocked for all sites</li>
            <li>Check if your site is in the "Block" list and move it to "Allow" if needed</li>
        </ol>
        
        <h4>Microsoft Edge:</h4>
        <ol>
            <li>Open Edge and type <code>edge://settings/content/notifications</code> in the address bar</li>
            <li>Make sure notifications are not blocked</li>
            <li>Check if your site is in the "Block" list and move it to "Allow" if needed</li>
        </ol>
        
        <h4>Firefox:</h4>
        <ol>
            <li>Open Firefox and type <code>about:preferences#privacy</code> in the address bar</li>
            <li>Scroll down to "Permissions" section</li>
            <li>Click "Settings" next to "Notifications"</li>
            <li>Make sure your site is not blocked</li>
        </ol>
    </div>
    
    <div class="step">
        <h3>Step 4: Check for Required Context</h3>
        <p>Web notifications require a secure context (HTTPS or localhost):</p>
        <ul>
            <li>If you're testing on a local server, make sure you're using <code>localhost</code> and not an IP address</li>
            <li>For production sites, ensure you're using HTTPS</li>
        </ul>
    </div>
    
    <div class="step">
        <h3>Step 5: Check Windows Action Center</h3>
        <p>Make sure your Windows Action Center isn't hiding notifications:</p>
        <ol>
            <li>Click the notification icon (speech bubble) in the Windows taskbar</li>
            <li>Check if notifications are appearing there but not showing as pop-ups</li>
            <li>Clear any accumulated notifications</li>
        </ol>
    </div>
    
    <div class="step">
        <h3>Step 6: Try Incognito/Private Mode</h3>
        <p>Browser extensions can sometimes interfere with notifications:</p>
        <ol>
            <li>Open your browser in incognito/private mode</li>
            <li>Navigate to your site and try to enable notifications</li>
            <li>If it works in incognito but not normal mode, disable browser extensions one by one to identify the culprit</li>
        </ol>
    </div>
    
    <div class="important">
        <h3>Important Note: Full-Screen Mode</h3>
        <p>Notifications will not appear if your browser is in full-screen mode. Make sure your browser is in windowed mode when testing notifications.</p>
    </div>
    
    <h2>Advanced Solutions</h2>
    
    <div class="step">
        <h3>Reset Browser Permissions</h3>
        <p>If all else fails, you can reset the site permissions:</p>
        <ol>
            <li>Clear your browser cookies and site data for the specific site</li>
            <li>Restart your browser</li>
            <li>Return to the site and grant notification permission again</li>
        </ol>
    </div>
    
    <div class="step">
        <h3>Check Browser and Windows Updates</h3>
        <p>Make sure both your browser and Windows are up to date:</p>
        <ul>
            <li>Update your browser to the latest version</li>
            <li>Run Windows Update to install any pending updates</li>
        </ul>
    </div>
    
    <div class="step">
        <h3>Test in a Different Browser</h3>
        <p>Try enabling notifications in a different browser to determine if the issue is browser-specific.</p>
    </div>
    
    <p><a href="test-notifications.html">Return to the basic notification tester</a></p>
    
    <script>
        // Test notification button
        document.getElementById('testNotification').addEventListener('click', function() {
            const resultElement = document.getElementById('testResult');
            
            // Check if notifications are supported
            if (!("Notification" in window)) {
                resultElement.innerHTML = "<p style='color: red;'>❌ Your browser does not support notifications</p>";
                return;
            }
            
            // Display current permission status
            resultElement.innerHTML = "<p>Current permission: <strong>" + Notification.permission + "</strong></p>";
            
            // Request permission if not granted
            if (Notification.permission !== "granted") {
                Notification.requestPermission().then(function(permission) {
                    resultElement.innerHTML += "<p>New permission status: <strong>" + permission + "</strong></p>";
                    
                    if (permission === "granted") {
                        sendTestNotification();
                    } else {
                        resultElement.innerHTML += "<p style='color: orange;'>⚠️ Notification permission was not granted</p>";
                    }
                });
            } else {
                // Permission already granted, send notification
                sendTestNotification();
            }
            
            function sendTestNotification() {
                try {
                    const notification = new Notification("Test Notification", {
                        body: "If you can see this, notifications are working!",
                        icon: "images/notifications/offer-notification.svg"
                    });
                    
                    resultElement.innerHTML += "<p style='color: green;'>✅ Notification sent successfully!</p>";
                    
                    // Log to console
                    console.log("Notification sent successfully");
                    
                    notification.onclick = function() {
                        resultElement.innerHTML += "<p style='color: green;'>✅ Notification was clicked!</p>";
                        window.focus();
                        notification.close();
                    };
                } catch (error) {
                    resultElement.innerHTML += "<p style='color: red;'>❌ Error sending notification: " + error.message + "</p>";
                    console.error("Error sending notification:", error);
                }
            }
        });
    </script>
</body>
</html> 